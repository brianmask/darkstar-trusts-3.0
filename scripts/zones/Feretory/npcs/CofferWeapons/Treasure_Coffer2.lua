-----------------------------------
-- Area: Ferretory
-- NPC:  Treasure Coffer
-- @pos  -52 0 -11 246
-----------------------------------
package.loaded["scripts/zones/Port_Jeuno/TextIDs"] = nil;
require("scripts/zones/Port_Jeuno/TextIDs");

-----------------------------------
-- onTrade Action
-----------------------------------

function onTrade(player,npc,trade)
local count = trade:getItemCount();
    local prize = trade:getItem(0);
    local a1 = 0;
    local a2 = 0;
    local a3 = 0;
    local a4 = 0;
    local v1 = 0;
    local v2 = 0;
    local v3 = 0;
    local v4 = 0;
	local noaug = 0;
	local power = player:getVar("FerretoryAura");
	
	local exclude = {10964,10965,10966,10967,10968,10969,10970,10971,10972,10973,10974,10975,10976,10977,10978,10979,10980,10981,10982,10983,10984,10985,10986,10987,10988,10989,
10990,10991,10992,10993,10994,10995,10996,10997,10998,10999,11000,11001,11002,11003,11004,11005,11006,11007,11008,11009,11010,10295,10296,10297,10298,10299,11014,11015,11016,11017,11018,11019,
11020,11021,11022,11023,11024,11025,11026,11027,11028,11029,11030,11031,11032,11033,11034,11035,11036,11037,11038,11039,11040,11041,11042,11043,11044,11045,11046,11047,11048,11049,11050,11051,
11052,11053,11054,11055,11056,11057,11058,11059,11060,11061,11678,11679,11680,11681,11682,11683,11684,11685,11686,11687,11688,11689,11690,11691,11692,11693,11694,11695,11696,11697,11698,11699,
11700,11701,11702,11703,11704,11705,11706,11707,11708,11709,11710,11711,11712,11713,11714,11715,11716,11717,11718,11719,11720,11721,11722,11723,11724,11725,11726,11727,13312,13313,13314,13315,
13316,13317,13318,13319,13320,13321,13322,13323,13324,13325,13326,13327,13328,13329,13330,13331,13332,13333,13334,13335,13336,13337,13338,13339,13340,13341,13342,13343,13344,13345,13346,13347,
13348,13349,13350,13351,13352,13353,13354,13355,13356,13357,13358,13359,13360,13361,13362,13363,13364,13365,13366,13367,13368,13369,13370,13371,13372,13373,13374,13375,13376,13377,13378,13379,
13380,13381,13382,13383,13384,13385,13386,13387,13388,13389,13390,13391,13392,13393,13394,13395,13396,13397,13398,13399,13400,13401,13402,13403,13404,13405,13406,13407,13408,13409,13410,13411,
13412,13413,13414,13415,13416,13417,13418,13419,13420,13421,13422,13423,13424,13425,13426,13427,13428,13429,13430,13431,13432,13433,13434,13435,13436,13437,13438,13439,14688,14689,14690,14691,
14692,14693,14694,14695,14696,14697,14698,14699,14700,14701,14702,14703,14704,14705,14706,14707,14708,14709,14710,14711,14712,14713,14714,14715,14716,14717,14718,14719,14720,14721,14722,14723,
14724,14725,14726,14727,14728,14729,14730,14731,14732,14733,14734,14735,14736,14737,14738,14739,14740,14741,14742,14743,14744,14745,14746,14747,14748,14749,14750,14751,14752,14753,14754,14755,
14756,14757,14758,14759,14760,14761,14762,14763,14764,14765,14766,14767,14768,14769,14770,14771,14772,14773,14774,14775,14776,14777,14778,14779,14780,14781,14782,14783,14784,14785,14786,14787,
14788,14789,14790,14791,14792,14793,14794,14795,14796,14797,14798,14799,14800,14801,14802,14803,14804,14805,14806,14807,14808,14809,14810,14811,14812,14813,14814,14815,15961,15962,15963,15964,
15965,15966,15967,15968,15969,15970,15971,15972,15973,15974,15975,15976,15977,15978,15979,15980,15981,15982,15983,15984,15985,15986,15987,15988,15989,15990,15991,15992,15993,15994,15995,15996,
15997,15998,15999,16000,16001,16002,16003,16004,16005,16006,16007,16008,16009,16010,16011,16012,16013,16014,16015,16016,16017,16018,16019,16020,16021,16022,16023,16024,16025,16026,16027,16028,
16029,16030,16031,16032,16033,16034,16035,16036,16037,16038,16039,16040,16041,16042,16043,16044,16045,16046,16047,16048,16049,16050,16052,16053,16054,16055,16056,16057,16058,16059,10392,10393,
10394,10395,10396,10397,10398,10914,10915,10916,10917,10918,10919,10920,10921,10922,10923,10924,10925,10926,10927,10928,10929,10930,10931,10932,10933,10934,10935,10936,10937,10938,10939,10940,
10941,10942,10943,10944,10945,10946,10947,10948,10949,10950,10951,10952,10953,10954,10955,10956,10957,10958,10959,10960,10961,10962,10963,11578,11579,11580,11581,11582,11583,11584,11585,11586,
11587,11588,11589,11590,11591,11592,11593,11594,11595,11596,11597,11598,11599,11600,11601,11602,11603,11604,11605,11606,11607,11608,11609,11610,11611,11612,11613,11614,11615,11616,11617,11618,
11619,11620,11621,11622,11623,11624,11625,11626,11627,11988,11989,11990,11991,11992,11993,11994,11995,11996,11997,11998,11999,12000,12001,12002,12003,12004,12005,12006,12007,13056,13057,13058,
13059,13060,13061,13062,13063,13064,13065,13066,13067,13068,13069,13070,13071,13072,13073,13074,13075,13076,13077,13078,13079,13080,13081,13082,13083,13084,13085,13086,13087,13088,13089,13090,
13091,13092,13093,13094,13095,13096,13097,13098,13099,13100,13101,13102,13103,13104,13105,13106,13107,13108,13109,13110,13111,13112,13113,13114,13115,13116,13117,13118,13119,13120,13121,13122,
13123,13124,13125,13126,13127,13128,13129,13130,13131,13132,13133,13134,13135,13136,13137,13138,13139,13140,13141,13142,13143,13144,13145,13146,13147,13148,13149,13150,13151,13152,13153,13154,
13155,13156,13157,13158,13159,13160,13161,13162,13163,13164,13165,13166,13167,13168,13169,13170,13171,13172,13173,13174,13175,13176,13177,13178,13179,13180,13181,13182,13183,15495,15496,15497,
15498,15499,15500,15501,15502,15503,15504,15505,15506,15507,15508,15509,15510,15511,15512,15513,15514,15515,15516,15517,15518,15519,15520,15521,15522,15523,15524,15525,15526,15527,15528,15529,
15530,15531,15532,15533,15534,15535,15536,15537,15538,15539,15540,16261,16262,16263,16264,16265,16266,16267,16268,16269,16270,16271,16272,16273,16274,16275,16276,16277,16278,16279,16280,16281,
16282,16283,16284,16285,16286,16287,16288,16289,16290,16291,16292,16293,16294,16295,16296,16297,16298,16299,16300,16301,16302,16303,16304,16305,16306,16307,16308,16309,
10750,10751,10752,10753,10754,10755,10756,10757,10758,10759,10760,10761,10762,10763,10764,10765,10766,10767,10768,10769,10770,10771,10772,10773,10774,10775,10776,10777,10778,10779,10780,10781,
10782,10783,10784,10785,10786,10787,10788,10789,10790,10791,10792,10793,10794,10795,10796,10797,10798,10799,11058,11059,11062,11063,11628,11629,11630,11631,11632,11633,11634,11635,11636,11637,
11638,11639,11640,11641,11642,11643,11644,11645,11646,11647,11648,11649,11650,11651,11652,11653,11654,11655,11656,11657,11658,11659,11660,11661,11662,11663,11664,11665,11666,11667,11668,11669,
11670,11671,11672,11673,11674,11675,11676,11677,13280,13281,13282,13283,13284,13285,13286,13287,13288,13289,13290,13291,13292,13293,13294,13295,13296,13297,13298,13299,13300,13301,13302,13303,
13304,13305,13306,13307,13308,13309,13310,13311,13440,13441,13442,13443,13444,13445,13446,13447,13448,13449,13450,13451,13452,13453,13454,13455,13456,13457,13458,13459,13460,13461,13462,13463,
13464,13465,13466,13467,13468,13469,13470,13471,13472,13473,13474,13475,13476,13477,13478,13479,13480,13481,13482,13483,13484,13485,13486,13487,13488,13489,13490,13491,13492,13493,13494,13495,
13496,13497,13498,13499,13500,13501,13502,13503,13504,13505,13506,13507,13508,13509,13510,13511,13512,13513,13514,13515,13516,13517,13518,13519,13520,13521,13522,13523,13524,13525,13526,13527,
13528,13529,13530,13531,13532,13533,13534,13535,13536,13537,13538,13539,13540,13541,13542,13543,13544,13545,13546,13547,13548,13549,13550,13551,13552,13553,13554,13555,13556,13557,14592,14593,
14594,14595,14596,14597,14598,14599,14600,14601,14602,14603,14604,14605,14606,14607,14608,14609,14610,14611,14612,14613,14614,14615,14616,14617,14618,14619,14620,14621,14622,14623,14624,14625,
14626,14627,14628,14629,14630,14631,14632,14633,14634,14635,14636,14637,14638,14639,14640,14641,14642,14643,14644,14645,14646,14647,14648,14649,14650,14651,14652,14653,14654,14655,14656,14657,
14658,14659,14660,14661,14662,14663,14664,14665,14666,14667,14668,14669,14670,14671,14672,14673,14674,14675,14676,14677,14678,14679,14680,14681,14682,14683,14684,14685,14686,14687,15541,15542,
15543,15544,15545,15546,15547,15548,15549,15550,15551,15552,15553,15554,15555,15556,15557,15558,15559,15560,15761,15762,15763,15764,15765,15766,15767,15768,15769,15770,15771,15772,15773,15774,
15775,15776,15777,15778,15779,15780,15781,15782,15783,15784,15785,15786,15787,15788,15789,15790,15791,15792,15793,15794,15795,15796,15797,15798,15799,15800,15801,15802,15803,15804,15805,15806,
15807,15808,15809,15810,15811,15812,15813,15814,15815,15816,15817,15818,15819,15820,15821,15822,15823,15824,15825,15826,15827,15828,15829,15830,15831,15832,15833,15834,15835,15836,15837,15838,
15839,15840,15841,15842,15843,15844,15845,15846,15847,15848,15849,15850,15851,15852,15853,15854,15855,15856,15857,15858,15859,
10814,10815,10816,10817,10818,10819,10820,10821,10822,10823,10824,10825,10826,10827,10828,10829,10830,10831,10832,10833,10834,10835,10836,10837,10838,10839,10840,10841,10842,10843,10844,10845,
10846,10847,10848,10849,10850,10851,10852,11728,11729,11730,11731,11732,11733,11734,11735,11736,11737,11738,11739,11740,11741,11742,11743,11744,11745,11746,11747,11748,11749,11750,11751,11752,
11753,11754,11755,11756,11757,11758,11759,11760,11761,11762,11763,11764,11765,11766,11767,11768,11769,11770,11771,11772,11773,11774,11775,11776,11777,13184,13185,13186,13187,13188,13189,13190,
13191,13192,13193,13194,13195,13196,13197,13198,13199,13200,13201,13202,13203,13204,13205,13206,13207,13208,13209,13210,13211,13212,13213,13214,13215,13216,13217,13218,13219,13220,13221,13222,
13223,13224,13225,13226,13227,13228,13229,13230,13231,13232,13233,13234,13235,13236,13237,13238,13239,13240,13241,13242,13243,13244,13245,13246,13247,13248,13249,13250,13251,13252,13253,13254,
13255,13256,13257,13258,13259,13260,13261,13262,13263,13264,13265,13266,13267,13268,13269,13270,13271,13272,13273,13274,13275,13276,13277,13278,13279,15271,15272,15273,15274,15275,15276,15277,
15278,15279,15280,15281,15282,15283,15284,15285,15286,15287,15288,15289,15290,15291,15292,15293,15294,15295,15296,15297,15298,15299,15300,15301,15302,15431,15432,15433,15434,15435,15436,15437,
15438,15439,15440,15441,15442,15443,15444,15445,15446,15447,15448,15449,15450,15451,15452,15453,15454,15455,15456,15457,15458,15459,15460,15461,15462,15860,15861,15862,15863,15864,15865,15866,
15867,15868,15869,15870,15871,15872,15873,15874,15875,15876,15877,15878,15879,15880,15881,15882,15883,15884,15885,15886,15887,15888,15889,15890,15891,15892,15893,15894,15895,15896,15897,15898,
15899,15900,15901,15902,15903,15904,15905,15906,15907,15908,15909,15910,15911,15912,15913,15914,15915,15916,15917,15918,15919,15920,15921,15922,15923,15924,15925,15926,15927,15928,15929,15930,
15931,15932,15933,15934,15935,15936,15937,15938,15939,15940,15941,15942,15943,15944,15945,15946,15947,15948,15949,15950,15951,15952,15953,15954,15955,15956,15957,15958,15959,
10800,10801,10802,10803,10804,10805,10806,10807,10808,10809,10810,10811,10812,11926,11927,12289,12290,12291,12292,12293,12294,12295,12296,12298,12299,12300,12301,12302,12303,12304,12305,12306,
12307,12308,12309,12310,12311,12312,12313,12316,12317,12318,12319,12320,12321,12323,12324,12325,12326,12327,12328,12329,12330,12331,12332,12333,12334,12335,12336,12337,12338,12339,12340,12341,
12342,12343,12344,12345,12346,12347,12348,12349,12350,12351,12352,12353,12354,12355,12356,12357,12358,12359,12360,12361,12362,12363,12364,12365,12366,12367,12368,12369,12370,12371,12372,12373,
12374,12375,12376,12377,12378,12379,12380,12381,12382,12383,12384,12385,12386,12387,12388,12389,12390,12391,12392,12393,12394,12395,12396,12397,12398,12399,12400,12401,12402,12403,12404,12405,
12406,12407,12408,12409,12410,12411,12412,12413,12414,12415,12416,15066,15067,15068,15069,15070,15071,16161,16162,16163,16164,16165,16166,16167,16168,16169,16170,16171,16172,16173,16174,16175,
16176,16177,16178,16179,16180,16181,16182,16183,16184,16185,16186,16187,16188,16189,16190,16191,16192,16193,16194,16195,16196,16197,16198,16199,16200,16201};
	
	if (prize < 16385) then
	for _,v in pairs(exclude) do
	if (v ~= prize) then
		for _,v in pairs(level1) do
		if (v == prize) then  --  look for the item in the level 1 list
			if (power > 1)  then
			power = 1;
			end
		end
		end

	    for _,v in pairs(level2) do
		if (v == prize) then  --  look for the item in the level 2 list
			if (power > 2)  then
			power = 2;
			player:PrintToPlayer(power);
			end
		end
	end
	for _,v in pairs(level3) do
		if (v == prize) then  --  look for the item in the level 3 list
			if (power > 3)  then
			power = 3;
			end
		end
	end
	for _,v in pairs(level4) do
		if (v == prize) then  --  look for the item in the level 4 list
			if (power > 4)  then
			power = 4;
			end
		end
	end
    for _,v in pairs(level5) do
		if (v == prize) then  --  look for the item in the level 5 list
			if (power > 5)  then
			power = 5;
			end
		end
	end
    for _,v in pairs(level6) do
		if (v == prize) then  --  look for the item in the level 6 list
			if (power > 6)  then
			power = 6;
			end
		end
	end
    for _,v in pairs(level7) do
		if (v == prize) then  --  look for the item in the level 7 list
			if (power > 7)  then
			power = 7;
			end
		end
	end	
	for _,v in pairs(level8) do
		if (v == prize) then  --  look for the item in the level 8 list
			if (power > 8)  then
			power = 8;
			end
		end
	end
	for _,v in pairs(level9) do
		if (v == prize) then  --  look for the item in the level 9 list
			if (power > 9)  then
			power = 9;
			end
		end
	end
	   
-- Leaftip
      if trade:getItem(1) == 8942 then 
         a1 = 1;
         v1 = power - 1;
		 a2 = 552;
         v2 = math.floor(power * 0.5);
      elseif trade:getItem(2) == 8942 then 
	     a1 = 1;
         v1 = power - 1;
         a3 = 552;
         v3 = math.floor(power * 0.5);
      elseif trade:getItem(3) == 8942 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 552;
         v4 = math.floor(power * 0.5);
       end	

-- Leafdim
      if trade:getItem(1) == 8951 then 
         a1 = 1;
         v1 = power - 1;
		 a2 = 553;
         v2 = math.floor(power * 0.5);
      elseif trade:getItem(2) == 8951 then 
	     a1 = 1;
         v1 = power - 1;
         a3 = 553;
         v3 = math.floor(power * 0.5);
      elseif trade:getItem(3) == 8951 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 553;
         v4 = math.floor(power * 0.5);
       end	 

-- Leaforb
      if trade:getItem(1) == 8960 then 
         a1 = 1;
         v1 = power - 1;
		 a2 = 551;
         v2 = math.floor(power * 0.5);
      elseif trade:getItem(2) == 8960 then 
	     a1 = 1;
         v1 = power - 1;
         a3 = 551;
         v3 = math.floor(power * 0.5);
      elseif trade:getItem(3) == 8960 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 551;
         v4 = math.floor(power * 0.5);
       end	
	   


-- Leafslit +1 Att/Acc
      if trade:getItem(1) == 8934 then 
         a1 = 1;
         v1 = power - 1;
		 a2 = 68;
         v2 = math.floor(power * 0.9);
      elseif trade:getItem(2) == 8934 then 
	     a1 = 1;
         v1 = power - 1;
         a3 = 68;
         v3 = math.floor(power * 0.9);
      elseif trade:getItem(3) == 8934 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 68;
         v4 = math.floor(power * 0.9);
       end
	   
-- Leaftip +1 R.Att/Racc
      if trade:getItem(1) == 8943 then 
         a1 = 1;
         v1 = power - 1;
		 a2 = 69;
         v2 = math.floor(power * 0.9);
      elseif trade:getItem(2) == 8943 then 
	     a1 = 1;
         v1 = power - 1;
         a3 = 69;
         v3 = math.floor(power * 0.9);
      elseif trade:getItem(3) == 8943 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 69;
         v4 = math.floor(power * 0.9);
       end	

-- Leafdim +1  -- EVASION
      if trade:getItem(1) == 8952 then 
         a1 = 1;
         v1 = power - 1;
		 a2 = 31;
         v2 = math.floor(power * 0.9);
      elseif trade:getItem(2) == 8952 then 
	     a1 = 1;
         v1 = power - 1;
         a3 = 31;
         v3 = math.floor(power * 0.9);
      elseif trade:getItem(3) == 8952 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 31;
         v4 = math.floor(power * 0.9);
       end	 

-- Leaforb +1  DEFENSE
      if trade:getItem(1) == 8961 then 
         a1 = 1;
         v1 = power - 1;
		 a2 = 33;
         v2 = math.floor(power * 0.9);
      elseif trade:getItem(2) == 8961 then 
	     a1 = 1;
         v1 = power - 1;
         a3 = 33;
         v3 = math.floor(power * 0.9);
      elseif trade:getItem(3) == 8961 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 33;
         v4 = math.floor(power * 0.9);
       end	   
	   
	   
-- Leafslit +2  Double Attack
      if trade:getItem(1) == 8935 then 
         a1 = 1;
         v1 = power - 1;
		 a2 = 143;
         v2 = math.floor(power * 0.1);
      elseif trade:getItem(2) == 8935 then 
	     a1 = 1;
         v1 = power - 1;
         a3 = 143;
         v3 = math.floor(power * 0.1);
      elseif trade:getItem(3) == 8935 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 143;
         v4 = math.floor(power * 0.1);
       end
	   
-- Leaftip +2 Haste
      if trade:getItem(1) == 8944 then 
         a1 = 1;
         v1 = power - 1;
		 a2 = 49;
         v2 = math.floor(power * 0.1);
      elseif trade:getItem(2) == 8944 then 
	     a1 = 1;
         v1 = power - 1;
         a3 = 49;
         v3 = math.floor(power * 0.1);
      elseif trade:getItem(3) == 8944 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 49;
         v4 = math.floor(power * 0.1);
       end	

-- Leafdim +2  Store TP
      if trade:getItem(1) == 8953 then 
         a1 = 1;
         v1 = power - 1;
		 a2 = 142;
         v2 = math.floor(power * 0.1);
      elseif trade:getItem(2) == 8953 then 
	     a1 = 1;
         v1 = power - 1;
         a3 = 142;
         v3 = math.floor(power * 0.1);
      elseif trade:getItem(3) == 8953 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 142;
         v4 = math.floor(power * 0.1);
       end	 

-- Leaforb +2  Critical Hitrate
      if trade:getItem(1) == 8962 then 
         a1 = 1;
         v1 = power - 1;
		 a2 = 41;
         v2 = math.floor(power * 0.1);
      elseif trade:getItem(2) == 8962 then 
	     a1 = 1;
         v1 = power - 1;
         a3 = 41;
         v3 = math.floor(power * 0.1);
      elseif trade:getItem(3) == 8962 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 41;
         v4 = math.floor(power * 0.1);
       end	   
	   

-- Snowslit	   INT/MND
 if trade:getItem(1) == 8930 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 554;
         v2 = math.floor(power * 0.5);
      elseif trade:getItem(2) == 8930 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 554;
         v3 = math.floor(power * 0.5);
      elseif trade:getItem(3) == 8930 then 
	     a1 = 1;
         v1 = power - 1;
         a4 = 554;
         v4 = math.floor(power * 0.5);
       end
	   
-- Snowtip  MND/CHR
      if trade:getItem(1) == 8939 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 555;
         v2 = math.floor(power * 0.5);
      elseif trade:getItem(2) == 8939 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 555;
         v3 = math.floor(power * 0.5);
      elseif trade:getItem(3) == 8939 then 
	     a1 = 9;
         v1 = power - 1;
         a4 = 555;
         v4 = math.floor(power * 0.5);
       end	

-- Snowdim STR/CHR
      if trade:getItem(1) == 8948 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 557;
         v2 = math.floor(power * 0.5);
      elseif trade:getItem(2) == 8948 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 557;
         v3 = math.floor(power * 0.5);
      elseif trade:getItem(3) == 8948 then 
	     a1 = 9;
         v1 = power - 1;
         a4 = 557;
         v4 = math.floor(power * 0.5);
       end	 

-- Snoworb  STR/INT
      if trade:getItem(1) == 8957 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 558;
         v2 = math.floor(power * 0.5);
      elseif trade:getItem(2) == 8957 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 558;
         v3 = math.floor(power * 0.5);
      elseif trade:getItem(3) == 8957 then 
	     a1 = 9;
         v1 = power - 1;
         a4 = 558;
         v4 = math.floor(power * 0.5);
       end	
	   
	   
	   
-- Snowslit +1 Magic Attack
      if trade:getItem(1) == 8931 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 133;
         v2 = math.floor(power * 0.5);
      elseif trade:getItem(2) == 8931 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 133;
         v3 = math.floor(power * 0.5);
      elseif trade:getItem(3) == 8931 then 
	     a1 = 9;
         v1 = power - 1;
         a4 = 133;
         v4 = math.floor(power * 0.5);
       end
	   
-- Snowftip Magic Acc
      if trade:getItem(1) == 8940 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 35;
         v2 = math.floor(power * 0.5);
      elseif trade:getItem(2) == 8940 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 35;
         v3 = math.floor(power * 0.5);
      elseif trade:getItem(3) == 8940 then 
	     a1 = 9;
         v1 = power - 1;
         a4 = 35;
         v4 = math.floor(power * 0.5);
       end	

-- Snowfdim +1  -- Magic EVASION
      if trade:getItem(1) == 8949 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 37;
         v2 = math.floor(power * 0.5);
      elseif trade:getItem(2) == 8949 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 37;
         v3 = math.floor(power * 0.5);
      elseif trade:getItem(3) == 8949 then 
	     a1 = 9;
         v1 = power - 1;
         a4 = 37;
         v4 = math.floor(power * 0.5);
       end	 

-- Snowforb +1  Magic DEFENSE
      if trade:getItem(1) == 8958 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 134;
         v2 = math.floor(power * 0.5);
      elseif trade:getItem(2) == 8958 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 134;
         v3 = math.floor(power * 0.5);
      elseif trade:getItem(3) == 8958 then 
	     a1 = 9;
         v1 = power - 1;
         a4 = 134;
         v4 = math.floor(power * 0.5);
       end	   
	   
	   
-- Snowslit +2  Cure Spellcasting -%
      if trade:getItem(1) == 8932 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 323;
         v2 = math.floor(power * 0.2);
      elseif trade:getItem(2) == 8932 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 323;
         v3 = math.floor(power * 0.2);
      elseif trade:getItem(3) == 8932 then 
	     a1 = 9;
         v1 = power - 1;
         a4 = 323;
         v4 = math.floor(power * 0.2);
       end
	   
-- Leaftip +2 Magic Damage +
      if trade:getItem(1) == 8941 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 362;
         v2 = math.floor(power * 0.2);
      elseif trade:getItem(2) == 8941 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 362;
         v3 = math.floor(power * 0.2);
      elseif trade:getItem(3) == 8941 then 
	     a1 = 9;
         v1 = power - 1;
         a4 = 362;
         v4 = math.floor(power * 0.2);
       end	

-- Snowdim +2  Magic Critical
      if trade:getItem(1) == 8950 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 355;
         v2 = math.floor(power * 0.3);
      elseif trade:getItem(2) == 8950 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 355;
         v3 = math.floor(power * 0.3);
      elseif trade:getItem(3) == 8950 then 
	     a1 = 9;
         v1 = power - 1;
         a4 = 355;
         v4 = math.floor(power * 0.3);
       end	 

-- Snoworb +2  Song Recast 
      if trade:getItem(1) == 8959 then 
         a1 = 9;
         v1 = power - 1;
		 a2 = 357;
         v2 = math.floor(power * 0.2);
      elseif trade:getItem(2) == 8959 then 
	     a1 = 9;
         v1 = power - 1;
         a3 = 357;
         v3 = math.floor(power * 0.2);
      elseif trade:getItem(3) == 8959 then 
	     a1 = 9;
         v1 = power - 1;
         a4 = 357;
         v4 = math.floor(power * 0.2);
       end	   	   
	   
	   
	   
	   
	   
	   
	   
	   
	
	
	
	else
	player:PrintToPlayer("NPC : I can't do anything with that", 0xD);
	break;
	end

       end
	   else
	   noaug = 1;
	   end

    
	
	if(player:getFreeSlotsCount() >= 1) then
	if (noaug == 0) then
     player:tradeComplete();
     player:addItem(prize,1,a1,v1,a2,v2,a3,v3,a4,v4);
     player:messageSpecial(ITEM_OBTAINED,prize);
     else
     player:PrintToPlayer("NPC : I can't do anything with that", 0xD);
    end
	else
	player:messageSpecial(ITEM_CANNOT_BE_OBTAINED,prize);
	end
	

end;





-----------------------------------
-- onTrigger Action
-----------------------------------

function onTrigger(player,npc)

	player:PrintToPlayer("Armor Goes Here");
end;

-----------------------------------
-- onEventUpdate
-----------------------------------

function onEventUpdate(player,csid,option)
--printf("CSID: %u",csid);
--printf("RESULT: %u",option);
end;

-----------------------------------
-- onEventFinish
-----------------------------------

function onEventFinish(player,csid,option)
--printf("CSID: %u",csid);
--printf("RESULT: %u",option);
end;